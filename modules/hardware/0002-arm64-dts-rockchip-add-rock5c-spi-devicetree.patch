From c9e177016ea2ba319fd7b03b3e44a0767b7d9878 Mon Sep 17 00:00:00 2001
From: Alvin Xie <alvin@radxa.com>
Date: Wed, 19 Jun 2024 15:13:53 +0800
Subject: [PATCH 2/5] arm64: dts: rockchip: add rock5c spi devicetree

Signed-off-by: Alvin Xie <alvin@radxa.com>
---
 arch/arm64/boot/dts/rockchip/Makefile         |  1 +
 .../boot/dts/rockchip/rk3588s-rock-5c-spi.dts | 45 +++++++++++++++++++
 2 files changed, 46 insertions(+)
 create mode 100644 arch/arm64/boot/dts/rockchip/rk3588s-rock-5c-spi.dts

diff --git a/arch/arm64/boot/dts/rockchip/Makefile b/arch/arm64/boot/dts/rockchip/Makefile
index 5b62eba59e1b..39a16f32595a 100644
--- a/arch/arm64/boot/dts/rockchip/Makefile
+++ b/arch/arm64/boot/dts/rockchip/Makefile
@@ -135,3 +135,4 @@ dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3588s-nanopi-r6c.dtb
 dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3588s-rock-5a.dtb
 dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3588s-orangepi-5.dtb
 dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3588s-rock-5c.dtb
+dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3588s-rock-5c-spi.dtb
diff --git a/arch/arm64/boot/dts/rockchip/rk3588s-rock-5c-spi.dts b/arch/arm64/boot/dts/rockchip/rk3588s-rock-5c-spi.dts
new file mode 100644
index 000000000000..e696b2316fef
--- /dev/null
+++ b/arch/arm64/boot/dts/rockchip/rk3588s-rock-5c-spi.dts
@@ -0,0 +1,45 @@
+// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
+/*
+ * Copyright (c) 2022 Rockchip Electronics Co., Ltd.
+ * Copyright (c) 2024 Radxa Limited
+ *
+ */
+
+/dts-v1/;
+
+#include "rk3588s-rock-5c.dts"
+
+&sfc {
+	status = "okay";
+	max-freq = <50000000>;
+	#address-cells = <1>;
+	#size-cells = <0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&fspim0_pins>;
+
+	spi_flash: spi-flash@0 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		compatible = "jedec,spi-nor";
+		reg = <0x0>;
+		spi-max-frequency = <50000000>;
+		spi-tx-bus-width = <1>;
+		spi-rx-bus-width = <4>;
+		status = "okay";
+
+		partitions {
+			compatible = "fixed-partitions";
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			loader@0 {
+				label = "loader";
+				reg = <0x0 0x1000000>;
+			};
+		};
+	};
+};
+
+&sdhci {
+	status = "disabled";
+};
-- 
2.45.2

